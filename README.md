# KittAgent

**KittAgent** is an advanced AI agent platform built with **Elixir** and **Phoenix LiveView**, designed to bring physical robots to life using Large Language Models (LLMs).

It currently specializes in controlling **mBot2** robots, enabling them to engage in natural language conversations while autonomously deciding on physical actions like moving and turning based on context.

## üöÄ Key Features

### 1. Advanced Agent Management ("Kitts")
*   **Comprehensive Profiles**: Manage multiple agents with distinct profiles including Name, Model, Vendor, Birthday, and Hometown.
*   **Localization Support**:
    *   **Language Selection**: Choose from 18+ languages (Japanese, English, Swahili, etc.) for your agent's communication.
    *   **Timezone Awareness**: Selectable timezone support (via `Tzdata`) to ground the agent in a specific locale.
*   **Personality Engine**: Define complex biographies and behavioral traits ("Personality").
*   **UI Enhancements**:
    *   **Biography Popup**: Quickly view detailed agent personas via a modal in the list view.
    *   **Smart Forms**: Dropdown selection for languages and timezones with sensible defaults (Japanese / Asia/Tokyo).

### 2. LLM-Driven Intelligence & Control
*   **State-of-the-Art Models**:
    *   **Conversation**: Powered by **Google Gemini 2.5 Flash Lite Preview** for high-speed, low-latency responses.
    *   **Summarization**: Utilizes **Google Gemini 3.0 Flash Preview** for distinct, high-quality memory consolidation.
*   **Structured Outputs**: Enforces strict JSON Schema for all LLM responses to ensure reliable parsing.
*   **Physical Capabilities (SystemActions)**:
    *   The agent can decide to perform physical actions instead of or alongside talking.
    *   **Supported Actions**: `MoveForward`, `MoveBackward`, `TurnLeft`, `TurnRight`, `Stop`.
    *   **Parameter Control**: Precise execution with parameters like `duration_sec` (e.g., "5s"), `distance_cm` (e.g., "10cm"), or `angle_degrees` (e.g., "90deg").

### 3. Dual-Layer Memory Architecture
*   **Short-term Memory (Events)**:
    *   Maintains a log of the last ~20-100 interactions to provide immediate context.
    *   Stores detailed structured data including Mood, Message, and Action parameters.
*   **Long-term Memory (Memories)**:
    *   **Auto-Summarization**: A background `Summarizer` process monitors conversation flow.
    *   **Trigger Logic**: Automatically condenses every ~20 new events into a narrative summary.
    *   **Injection**: The most recent summary is injected into the system prompt, giving the agent a persistent sense of history.

### 4. Interactive Dashboard
*   **Real-time Chat**: interact directly with your Kitt agents via a web interface.
*   **Live Monitoring**: Watch the agent's internal state, including:
    *   **Mood**: (e.g., `sassy`, `playful`, `irritated`).
    *   **Thought Process**: See the raw JSON decisions made by the LLM.
    *   **Physical Logs**: Track the exact commands sent to the mBot2 hardware.

## üõ† Tech Stack

*   **Core**: Elixir, Phoenix Framework (LiveView)
*   **Database**: PostgreSQL
*   **AI Provider**: Google Vertex AI (via OpenRouter or direct API)
*   **Styling**: Tailwind CSS + DaisyUI
*   **Infrastructure**: Docker & Docker Compose

## üóÑ Database Schema Overview

*   **kitts**: Core agent metadata (name, lang, timezone, etc.).
*   **biographies**: Stores the detailed "Personality" text for each Kitt.
*   **events**: The raw log of all interactions (user inputs and agent responses).
*   **contents**: Detailed structured data for each event (message, action type, mood).
*   **system_actions**: Specific parameters for physical actions (e.g., `MoveForward` 10cm).
*   **memories**: Narrative summaries generated by the Summarizer.

## üì¶ Installation & Setup

### Prerequisites
*   Docker & Docker Compose

### Quick Start

1.  **Clone the repository:**
    ```bash
    git clone <repository_url>
    cd kitt_agent
    ```

2.  **Setup Environment & Dependencies:**
    This command installs Elixir dependencies and sets up the database.
    ```bash
    docker compose run --rm app mix setup
    ```

3.  **Configure Credentials:**
    Ensure you have your Google Vertex AI / OpenRouter API keys configured.
    (Check `config/runtime.exs` or `.env` files if applicable).

4.  **Start the Server:**
    ```bash
    docker compose up
    ```

    Visit `http://localhost:4000` to access the KittAgent Dashboard.

5.  **Run Tests:**
    To ensure everything is working correctly:
    ```bash
    docker compose run --rm -e MIX_ENV=test app mix test
    ```

## üìù License

This project is licensed under the MIT License.